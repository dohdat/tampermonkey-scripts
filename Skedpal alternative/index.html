<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Personal SkedPal Scheduler</title>
    <link rel="stylesheet" href="tailwind.css" />
  </head>
  <body class="min-h-screen bg-slate-950 text-slate-100 font-body">
    <div class="fixed top-4 right-4 z-20">
      <button
        data-reschedule-btn
        class="rounded-xl bg-lime-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow-lg shadow-lime-400/30 hover:bg-lime-300"
        type="button"
      >
        Reschedule
      </button>
    </div>
    <div
      class="min-h-screen bg-[radial-gradient(circle_at_10%_10%,rgba(34,197,94,0.08),transparent_32%),radial-gradient(circle_at_80%_0%,rgba(59,130,246,0.08),transparent_35%)] pb-10"
    >
      <header class="mx-auto w-full max-w-4xl px-6 pt-8 pb-4 space-y-4">
        <div>
          <h1 class="text-2xl font-semibold tracking-wide">Personal SkedPal</h1>
          <p class="text-sm text-slate-400">Manual SkedPal-style scheduler for Google Calendar.</p>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <button
            data-view="tasks"
            class="nav-btn rounded-xl border border-lime-400/60 bg-slate-900/70 px-3 py-2 text-sm font-semibold text-slate-100 shadow ring-1 ring-lime-400/50"
          >
            Tasks
          </button>
          <button
            data-view="timemaps"
            class="nav-btn rounded-xl border border-slate-800 bg-slate-900/50 px-3 py-2 text-sm font-semibold text-slate-200 shadow"
          >
            TimeMaps
          </button>
          <button
            data-view="schedule"
            class="nav-btn rounded-xl border border-slate-800 bg-slate-900/50 px-3 py-2 text-sm font-semibold text-slate-200 shadow"
          >
            Schedule
          </button>
        </div>
      </header>
      <main class="mx-auto w-full max-w-4xl px-6 space-y-4 pb-8">
        <section id="tasks" class="view space-y-3">
          <div class="flex items-center justify-between gap-2">
            <div class="text-sm text-slate-300">Add tasks to schedule automatically.</div>
            <button
              id="task-toggle"
              class="rounded-lg border border-slate-700 px-3 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
              type="button"
            >
              Show Task form
            </button>
          </div>
          <div id="task-form-wrap" class="hidden">
            <form id="task-form" class="mt-2 grid gap-3 rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg">
              <input type="hidden" id="task-id" />
              <label class="grid gap-2 text-sm text-slate-300">
                Title
                <input
                  id="task-title"
                  required
                  placeholder="Write feature summary"
                  class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 placeholder:text-slate-500 focus:border-lime-400 focus:outline-none"
                />
              </label>
              <div class="grid gap-3 md:grid-cols-2">
                <label class="grid gap-2 text-sm text-slate-300">
                  Duration (minutes)
                  <input
                  id="task-duration"
                  type="number"
                  min="15"
                  step="15"
                  value="30"
                  required
                  placeholder="30"
                  class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 placeholder:text-slate-500 focus:border-lime-400 focus:outline-none"
                />
              </label>
                <label class="grid gap-2 text-sm text-slate-300">
                  Priority (1 low â€“ 5 high)
                  <select
                    id="task-priority"
                    class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 focus:border-lime-400 focus:outline-none"
                  >
                    <option value="5">5</option>
                    <option value="4">4</option>
                    <option value="3" selected>3</option>
                    <option value="2">2</option>
                    <option value="1">1</option>
                  </select>
                </label>
              </div>
              <div class="grid gap-3 md:grid-cols-2">
                <label class="grid gap-2 text-sm text-slate-300">
                  Deadline
                  <input
                    id="task-deadline"
                    type="date"
                    class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 focus:border-lime-400 focus:outline-none"
                  />
                </label>
                <label class="grid gap-2 text-sm text-slate-300">
                  Allowed TimeMaps
                  <div id="task-timemap-options" class="flex flex-wrap gap-2"></div>
                </label>
              </div>
              <div class="flex justify-end gap-2">
                <button
                  class="rounded-xl border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
                  type="button"
                  id="task-reset"
                >
                  Reset
                </button>
                <button
                  class="rounded-xl bg-lime-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow hover:bg-lime-300"
                  type="submit"
                >
                  Save Task
                </button>
              </div>
            </form>
          </div>
          <div id="task-list" class="grid gap-3"></div>
        </section>

        <section id="timemaps" class="view hidden space-y-3">
          <div class="flex items-center justify-between gap-2">
            <div class="text-sm text-slate-300">Define availability maps; expand to add or edit.</div>
            <button
              id="timemap-toggle"
              class="rounded-lg border border-slate-700 px-3 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
              type="button"
            >
              Show TimeMap form
            </button>
          </div>
          <div id="timemap-form-wrap" class="hidden">
            <form
              id="timemap-form"
              class="mt-2 grid gap-3 rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg"
            >
              <input type="hidden" id="timemap-id" />
              <label class="grid gap-2 text-sm text-slate-300">
                Name
                <input
                  id="timemap-name"
                  required
                  placeholder="Deep Work"
                  class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 placeholder:text-slate-500 focus:border-lime-400 focus:outline-none"
                />
              </label>
              <label class="grid gap-2 text-sm text-slate-300">
                Color (hex)
                <input
                  id="timemap-color"
                  type="color"
                  value="#22c55e"
                  class="h-11 w-24 rounded-xl border border-slate-800 bg-slate-900 px-2 py-1 text-slate-100"
                />
              </label>
              <label class="grid gap-2 text-sm text-slate-300">
                Per-day availability (each day can differ; add multiple blocks per day)
                <div id="timemap-day-rows" class="grid gap-2"></div>
              </label>
              <div class="flex justify-end gap-2">
                <button
                  class="rounded-xl border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
                  type="button"
                  id="timemap-reset"
                >
                  Reset
                </button>
                <button
                  class="rounded-xl border border-lime-400/60 px-4 py-2 text-sm font-semibold text-lime-300 hover:border-lime-400"
                  type="button"
                  id="timemap-set-default"
                >
                  Set as default
                </button>
                <button
                  class="rounded-xl bg-lime-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow hover:bg-lime-300"
                  type="submit"
                >
                  Save TimeMap
                </button>
              </div>
            </form>
          </div>
          <div id="timemap-list" class="grid gap-3"></div>
        </section>

        <section id="schedule" class="view hidden space-y-3">
          <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg space-y-3">
            <div class="flex flex-col gap-3 md:flex-row md:items-start md:justify-between">
              <div>
                <h3 class="text-base font-semibold">Reschedule</h3>
                <p class="text-sm text-slate-400">
                  Deletes previous scheduled task events (source=personal-skedpal), fetches FreeBusy, and fills the
                  earliest valid slots.
                </p>
              </div>
              <button
                data-reschedule-btn
                class="rounded-xl bg-lime-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow hover:bg-lime-300"
                type="button"
              >
                Reschedule Now
              </button>
            </div>
            <div class="grid gap-3 md:grid-cols-[200px_1fr]">
              <label class="grid gap-2 text-sm text-slate-300">
                Horizon (days)
                <input
                  id="horizon"
                  type="number"
                  min="1"
                  max="60"
                  class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 focus:border-lime-400 focus:outline-none"
                />
              </label>
              <div class="text-sm text-slate-400" id="schedule-status">Idle</div>
            </div>
          </div>
          <div id="scheduled-summary" class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg"></div>
        </section>
      </main>
    </div>
    <script type="module" src="page.js"></script>
  </body>
</html>
