<div class="app-shell min-h-screen bg-[radial-gradient(circle_at_10%_10%,rgba(var(--color-green-500-rgb),0.08),transparent_32%),radial-gradient(circle_at_80%_0%,rgba(var(--color-blue-500-rgb),0.08),transparent_35%)]">
  <aside class="sidebar" aria-label="Primary navigation">
    <div class="sidebar-brand">
      <span class="sidebar-mark" aria-hidden="true">
        <svg viewBox="0 0 64 64" width="26" height="26" fill="none">
          <defs>
            <linearGradient id="sidebar-swoosh" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" style="stop-color: var(--color-cyan-400);" />
              <stop offset="100%" style="stop-color: var(--color-purple-500);" />
            </linearGradient>
          </defs>
          <path
            d="M10 26c6-6.5 13.2-9.8 21.5-9.8 8.3 0 16 3.4 22.5 9.8-6 6.5-13.5 9.8-22.5 9.8C23.5 35.8 16 32.5 10 26Z"
            fill="url(#sidebar-swoosh)"
            opacity="0.85"
          />
          <path
            d="M17 38c5-4.8 10.7-7.3 17.5-7.3S47 33.2 53 38c-5.2 5.1-11.8 7.7-18.5 7.7S22.3 43.1 17 38Z"
            fill="url(#sidebar-swoosh)"
            opacity="0.7"
          />
        </svg>
      </span>
      <div>
        <p class="text-xs text-slate-400">SkedPal</p>
        <p class="text-sm font-semibold text-slate-100">Dashboard</p>
      </div>
    </div>
    <div class="sidebar-nav" role="navigation" aria-label="Main">
      <button class="nav-btn sidebar-link" data-view="tasks" type="button" aria-current="page">
        <span class="sidebar-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M5 6h14M5 12h14M5 18h14" stroke-linecap="round" />
            <circle cx="7" cy="6" r="1.25" fill="currentColor" />
            <circle cx="7" cy="12" r="1.25" fill="currentColor" />
            <circle cx="7" cy="18" r="1.25" fill="currentColor" />
          </svg>
        </span>
        <span class="sidebar-label" data-test-skedpal="nav-tasks">Tasks</span>
      </button>
      <div class="sidebar-favorites">
        <p class="sidebar-fav-header">Favorites</p>
        <ul
          id="sidebar-favorites"
          class="sidebar-fav-list"
          aria-label="Favorite sections and subsections"
          data-test-skedpal="sidebar-favorites"
        ></ul>
      </div>
      <button class="nav-btn sidebar-link" data-view="today" type="button">
        <span class="sidebar-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M5 4h14M5 20h14M5 8h14M8 3v2M16 3v2" stroke-linecap="round" />
            <rect x="5" y="7" width="14" height="13" rx="2" ry="2" />
            <path d="M9.5 13.5 11 15l3.5-4" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </span>
        <span class="sidebar-label" data-test-skedpal="nav-today">Today</span>
      </button>
      <button class="nav-btn sidebar-link" data-view="calendar" type="button">
        <span class="sidebar-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <rect x="4" y="5" width="16" height="15" rx="2" ry="2" />
            <path d="M8 3v4M16 3v4M4 10h16" stroke-linecap="round" />
            <rect x="7" y="12.5" width="3" height="3" rx="0.6" />
            <rect x="12.5" y="12.5" width="3" height="3" rx="0.6" />
          </svg>
        </span>
        <span class="sidebar-label" data-test-skedpal="nav-calendar">Calendar</span>
      </button>
      <button class="nav-btn sidebar-link relative" data-view="report" type="button">
        <span class="sidebar-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M4 20V6m5 14V4m5 16V9m5 11V7" stroke-linecap="round" />
          </svg>
        </span>
        <span class="relative inline-flex items-start pr-3" data-test-skedpal="nav-report-wrap">
          <span class="sidebar-label" data-test-skedpal="nav-report">Report</span>
          <span
            class="absolute -top-2 left-full hidden flex h-[18px] min-w-[18px] -translate-x-1/2 items-center justify-center rounded-full bg-[color:var(--color-orange-500)] px-1 text-[10px] font-semibold text-white"
            data-test-skedpal="nav-report-badge"
          ></span>
        </span>
      </button>
      <button class="nav-btn sidebar-link" data-view="settings" type="button">
        <span class="sidebar-icon" aria-hidden="true">
          <svg viewBox="0 0 20 20" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M8.5 2.5h3l.5 2.2a5.5 5.5 0 0 1 1.8 1.1l2.1-.8 1.5 2.6-1.6 1.4c.1.35.2.73.2 1.1s-.07.75-.2 1.1l1.6 1.4-1.5 2.6-2.1-.8a5.5 5.5 0 0 1-1.8 1.1l-.5 2.2h-3l-.5-2.2a5.5 5.5 0 0 1-1.8-1.1l-2.1.8-1.5-2.6 1.6-1.4a5 5 0 0 1-.2-1.1c0-.37.07-.75.2-1.1L2.6 7.6l1.5-2.6 2.1.8a5.5 5.5 0 0 1 1.8-1.1Z" stroke-linejoin="round"></path>
            <circle cx="10" cy="10" r="2.2"></circle>
          </svg>
        </span>
        <span class="sidebar-label" data-test-skedpal="nav-settings">Settings</span>
      </button>
    </div>
  </aside>
  <div class="app-main flex-1 pb-10">
    <header class="mx-auto w-full max-w-5xl px-6 pt-8 pb-4 space-y-4">
      <div id="nav-breadcrumb" class="flex items-center gap-2 text-xs text-slate-400"></div>
      <div>
        <h1 class="text-2xl font-semibold tracking-wide" data-test-skedpal="app-title">Personal SkedPal</h1>
      </div>
    </header>
    <main class="mx-auto w-full max-w-5xl px-6 space-y-4 pb-8">
      <div
        id="notification-banner"
        class="notification-banner hidden"
        role="status"
        aria-live="polite"
      >
        <span id="notification-message" class="notification-banner__message"></span>
        <button id="notification-undo" type="button" class="notification-banner__undo">Undo</button>
      </div>
      <section id="tasks" class="view space-y-3">
        <div class="flex items-center justify-between gap-2">
          <div class="text-sm text-slate-300">Add tasks to schedule automatically.</div>
          <button
            id="task-toggle"
            class="rounded-xl bg-lime-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow hover:bg-lime-300"
            type="button"
            data-test-skedpal="task-toggle"
          >
            Add task
          </button>
        </div>
        <div id="task-list" class="grid gap-3" data-test-skedpal="task-list"></div>
      </section>

      <section id="today" class="view hidden space-y-3" data-test-skedpal="today-view">
        <div class="flex items-center justify-between gap-2">
          <h3 class="text-base font-semibold" data-test-skedpal="today-title">Today</h3>
          <span class="text-xs text-slate-400" data-test-skedpal="today-subtitle">Day snapshot</span>
        </div>
        <div id="today-list" class="grid gap-3" data-test-skedpal="today-list"></div>
      </section>

      <section id="calendar" class="view hidden space-y-3">
        <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg space-y-4" data-test-skedpal="calendar-shell">
          <div class="calendar-toolbar flex flex-col gap-3 md:flex-row md:items-center md:justify-between" data-test-skedpal="calendar-toolbar">
            <div class="flex flex-wrap items-center gap-3">
              <h3 id="calendar-title" class="text-base font-semibold" data-test-skedpal="calendar-title"></h3>
              <div class="flex items-center gap-2" data-test-skedpal="calendar-nav">
                <button
                  id="calendar-prev"
                  type="button"
                  class="rounded-lg border border-slate-700 px-2 py-1 text-xs font-semibold text-slate-200 hover:border-lime-400"
                  data-test-skedpal="calendar-prev"
                >
                  ‹
                </button>
                <button
                  id="calendar-next"
                  type="button"
                  class="rounded-lg border border-slate-700 px-2 py-1 text-xs font-semibold text-slate-200 hover:border-lime-400"
                  data-test-skedpal="calendar-next"
                >
                  ›
                </button>
                <button
                  id="calendar-today"
                  type="button"
                  class="rounded-lg border border-slate-700 px-3 py-1 text-xs font-semibold text-slate-200 hover:border-lime-400"
                  data-test-skedpal="calendar-today"
                >
                  Today
                </button>
              </div>
            </div>
            <div class="inline-flex rounded-xl border border-slate-800 bg-slate-950/80 p-1 text-xs" data-test-skedpal="calendar-view-toggle">
              <button
                id="calendar-view-day"
                type="button"
                class="calendar-view-btn"
                data-test-skedpal="calendar-view-day"
              >
                Day
              </button>
              <button
                id="calendar-view-three"
                type="button"
                class="calendar-view-btn"
                data-test-skedpal="calendar-view-three"
              >
                3 Days
              </button>
              <button
                id="calendar-view-week"
                type="button"
                class="calendar-view-btn"
                data-test-skedpal="calendar-view-week"
              >
                Week
              </button>
            </div>
          </div>
          <div id="calendar-grid" class="calendar-grid" data-test-skedpal="calendar-grid"></div>
        </div>
      </section>

      <section id="report" class="view hidden space-y-3">
        <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg space-y-3" data-test-skedpal="report-shell">
          <div class="flex flex-wrap items-center justify-between gap-2">
            <div>
              <h3 class="text-base font-semibold" data-test-skedpal="report-title">Report</h3>
              <p class="text-xs text-slate-400" data-test-skedpal="report-subtitle">
                Tasks missing schedules, ranked by missed runs.
              </p>
            </div>
          </div>
          <div id="report-list" class="grid gap-3" data-test-skedpal="report-list"></div>
        </div>
      </section>

      <section id="settings" class="view hidden space-y-4">
        <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg space-y-3">
          <div class="flex flex-wrap items-center gap-3">
            <h3 class="text-base font-semibold" data-test-skedpal="nav-sections">Sections</h3>
            <div id="section-list" class="flex flex-wrap gap-2 text-xs" data-test-skedpal="section-list"></div>
            <button
              id="section-form-toggle"
              type="button"
              class="rounded-xl border border-slate-700 px-3 py-1 text-xs font-semibold text-slate-200 hover:border-lime-400"
              data-test-skedpal="section-form-toggle"
            >
              Add section
            </button>
          </div>
          <div id="section-form-row" class="hidden flex flex-col gap-2 md:flex-row md:items-center" data-test-skedpal="section-form-row">
            <input
              id="section-new-name"
              placeholder="Add new section"
              class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 placeholder:text-slate-500 focus:border-lime-400 focus:outline-none"
              data-test-skedpal="section-new-name"
            />
            <button
              id="section-add"
              type="button"
              class="rounded-xl border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
              data-test-skedpal="section-add"
            >
              Add section
            </button>
          </div>
        </div>
        <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg space-y-3">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-xs uppercase tracking-wide text-slate-500" data-test-skedpal="nav-timemaps">TimeMaps</p>
              <h3 class="text-base font-semibold" data-test-skedpal="nav-timemaps">Availability maps</h3>
              <p class="text-sm text-slate-400">Create and edit TimeMaps to control when tasks can be scheduled.</p>
            </div>
            <button
              id="timemap-toggle"
              class="rounded-lg border border-slate-700 px-3 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
              type="button"
              data-test-skedpal="timemap-toggle"
            >
              New TimeMap
            </button>
          </div>
          <div id="timemap-form-wrap" class="hidden rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg">
            <div class="flex items-center justify-between gap-3">
              <div>
                <p class="text-xs uppercase tracking-wide text-slate-500">New TimeMap</p>
                <h4 class="text-base font-semibold">Define available windows</h4>
              </div>
              <button id="timemap-reset" type="button" class="text-sm text-lime-300 hover:text-lime-200">Reset</button>
            </div>
            <form id="timemap-form" class="space-y-3">
              <input id="timemap-id" type="hidden" data-test-skedpal="timemap-id" />
              <label class="field">
                <span class="field-label">Name</span>
                <input
                  id="timemap-name"
                  required
                  placeholder="Morning focus"
                  class="field-input"
                  data-test-skedpal="timemap-name"
                />
              </label>
              <div class="grid gap-3 md:grid-cols-[160px_1fr] md:items-center">
                <div class="field">
                  <span class="field-label">Color</span>
                  <div class="flex items-center gap-3">
                    <input
                      id="timemap-color"
                      type="color"
                      value="#a3e635"
                      class="h-10 w-16 rounded-lg border border-slate-700 bg-slate-900 p-1"
                      data-test-skedpal="timemap-color"
                    />
                    <span class="text-xs text-slate-400">Pick a tag color</span>
                  </div>
                </div>
                <div class="flex items-end gap-2">
                  <div class="field w-full">
                    <span class="field-label">Add day</span>
                    <select
                      id="timemap-day-select"
                      class="field-input"
                      data-test-skedpal="timemap-day-select"
                    >
                      <option value="0">Sunday</option>
                      <option value="1">Monday</option>
                      <option value="2">Tuesday</option>
                      <option value="3">Wednesday</option>
                      <option value="4">Thursday</option>
                      <option value="5">Friday</option>
                      <option value="6">Saturday</option>
                    </select>
                  </div>
                  <button
                    type="button"
                    class="rounded-lg border border-slate-700 px-3 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
                    id="timemap-day-add"
                    data-test-skedpal="timemap-day-add"
                  >
                    +
                  </button>
                </div>
              </div>
              <div>
                <span class="field-label block">Time ranges</span>
                <div id="timemap-day-rows" class="grid gap-2"></div>
              </div>
              <div class="flex flex-wrap items-center gap-2">
                <button
                  class="rounded-xl border border-slate-700 px-4 py-2 text-sm font-semibold text-slate-200 hover:border-lime-400"
                  type="button"
                  id="timemap-cancel"
                  data-test-skedpal="timemap-cancel"
                >
                  Cancel
                </button>
                <button
                  class="rounded-xl border border-lime-400/60 px-4 py-2 text-sm font-semibold text-lime-300 hover:border-lime-400"
                  type="button"
                  id="timemap-set-default"
                  data-test-skedpal="timemap-set-default"
                >
                  Set as default
                </button>
                <button
                  class="rounded-xl bg-lime-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow hover:bg-lime-300"
                  type="submit"
                >
                  Save TimeMap
                </button>
              </div>
            </form>
          </div>
          <div id="timemap-list" class="grid gap-3"></div>
        </div>

        <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg space-y-3">
          <div class="flex flex-col gap-3 md:flex-row md:items-start md:justify-between">
            <div>
              <p class="text-xs uppercase tracking-wide text-slate-500">Schedule</p>
              <h3 class="text-base font-semibold">Reschedule</h3>
              <p class="text-sm text-slate-400">
                Deletes previous scheduled task events (source=personal-skedpal), fetches FreeBusy, and fills the earliest valid slots.
              </p>
            </div>
            <button
              data-reschedule-btn
              class="rounded-xl bg-lime-400 px-4 py-2 text-sm font-semibold text-slate-900 shadow hover:bg-lime-300"
              type="button"
            >
              Reschedule Now
            </button>
          </div>
          <div class="grid gap-3 md:grid-cols-[200px_1fr]">
            <label class="grid gap-2 text-sm text-slate-300">
              Horizon (days)
              <input
                id="horizon"
                type="number"
                min="1"
                max="60"
                class="w-full rounded-xl border border-slate-800 bg-slate-950/80 px-3 py-2 text-slate-100 focus:border-lime-400 focus:outline-none"
                data-test-skedpal="horizon-input"
              />
            </label>
            <div class="text-sm text-slate-400" id="schedule-status">Idle</div>
          </div>
        </div>
        <div id="scheduled-summary" class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4 shadow-lg"></div>
      </section>
    </main>
  </div>
</div>
