<div id="task-form-wrap" class="task-modal hidden">
  <div
    class="task-modal__panel task-modal__panel--task"
    data-test-skedpal="task-modal-panel"
  >
    <div class="task-modal__header task-modal__header--task" data-test-skedpal="task-modal-header">
      <div>
        <p class="task-modal__eyebrow" data-test-skedpal="task-modal-eyebrow">Task intake</p>
        <h3 class="task-modal__title" data-test-skedpal="task-modal-title">Plan a new task</h3>
        <p class="task-modal__subtitle" data-test-skedpal="task-modal-subtitle">
          Set deadline, duration, and allowed TimeMaps before scheduling.
        </p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-task-modal-close
        aria-label="Close task form"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <form id="task-form" class="task-modal__form task-modal__form--task" data-test-skedpal="task-modal-form">
      <input type="hidden" id="task-id" />
      <input type="hidden" id="task-parent-id" />
      <div class="task-modal__body" data-test-skedpal="task-modal-body">
        <div class="task-modal__section task-modal__section--title" data-test-skedpal="task-modal-section-title">
          <label class="field task-form-grid__full" data-test-skedpal="task-title-field">
            <span class="field-label">
              Title
              <span class="field-label__required" data-test-skedpal="task-title-required">*</span>
            </span>
            <div class="field-input-wrap" data-test-skedpal="task-title-input-wrap">
              <input
                id="task-title"
                required
                placeholder="Write a short task title"
                class="field-input field-input--with-helper"
                data-test-skedpal="task-title-input"
              />
              <span class="field-input-helper" data-test-skedpal="task-title-helper"></span>
            </div>
          </label>
        </div>
        <div
          class="task-modal__section"
          data-test-skedpal="task-modal-section-time"
          data-collapsible="true"
          data-collapsed="false"
        >
          <div class="task-modal__section-header" data-test-skedpal="task-modal-section-time-header">
            <div class="task-modal__section-icon" data-test-skedpal="task-modal-section-time-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true" data-test-skedpal="task-modal-section-time-icon-svg">
                <path
                  d="M12 7v5l3 2M12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
            <div class="task-modal__section-text" data-test-skedpal="task-modal-section-time-text">
              <p class="task-modal__section-title" data-test-skedpal="task-modal-section-time-title">
                Time & Duration
              </p>
              
            </div>
            <button
              type="button"
              class="task-modal__section-toggle"
              data-test-skedpal="task-modal-section-time-toggle"
              aria-expanded="true"
              aria-controls="task-modal-section-time-content"
            >
              <svg
                viewBox="0 0 20 20"
                aria-hidden="true"
                class="task-modal__section-toggle-icon"
                data-test-skedpal="task-modal-section-time-toggle-icon"
              >
                <path
                  d="m5 7 5 5 5-5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </button>
          </div>
          <div
            class="task-modal__section-content"
            id="task-modal-section-time-content"
            data-test-skedpal="task-modal-section-time-content"
          >
            <div
              class="task-modal__section-grid task-modal__section-grid--three"
              data-test-skedpal="task-modal-section-time-grid"
            >
              <label class="field">
                <span class="field-label">Duration (minutes)</span>
                <input
                  id="task-duration"
                  type="number"
                  min="15"
                  step="15"
                  value="30"
                  required
                  placeholder="30"
                  class="field-input"
                />
                <span
                  id="task-duration-helper"
                  class="mt-1 text-xs text-slate-400"
                  data-test-skedpal="task-duration-helper"
                ></span>
              </label>
              <label class="field">
                <span class="field-label">Min block length (min)</span>
                <input
                  id="task-min-block"
                  type="number"
                  min="15"
                  step="15"
                  value="30"
                  placeholder="30"
                  class="field-input"
                />
              </label>
            <label class="field" data-test-skedpal="task-priority-field">
              <span class="field-label">Priority (1-5)</span>
              <div class="priority-dropdown" data-test-skedpal="task-priority-dropdown">
                <button
                  type="button"
                  class="priority-dropdown__trigger"
                  data-test-skedpal="task-priority-trigger"
                  aria-haspopup="listbox"
                  aria-expanded="false"
                >
                  <span class="priority-dropdown__icon" data-test-skedpal="task-priority-trigger-icon"></span>
                  <span class="priority-dropdown__text" data-test-skedpal="task-priority-trigger-text">
                    <span class="priority-dropdown__label" data-test-skedpal="task-priority-trigger-label">
                      Normal
                    </span>
                  </span>
                  <span class="priority-dropdown__value" data-test-skedpal="task-priority-trigger-value">
                    3
                  </span>
                  <span class="priority-dropdown__caret" data-test-skedpal="task-priority-trigger-caret">
                    <svg viewBox="0 0 20 20" aria-hidden="true">
                      <path
                        d="m5 7 5 5 5-5"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.6"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                    </svg>
                  </span>
                </button>
                <div
                  class="priority-dropdown__menu hidden"
                  role="listbox"
                  data-test-skedpal="task-priority-menu"
                >
                  <button
                    type="button"
                    class="priority-dropdown__option"
                    role="option"
                    data-value="5"
                    data-priority="5"
                    data-test-skedpal="task-priority-option-5"
                  >
                    <span class="priority-dropdown__icon" data-test-skedpal="task-priority-icon-5">
                      <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path
                          d="M12 4 3 20h18L12 4Z"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                        <path
                          d="M12 9v5m0 3v0"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                      </svg>
                    </span>
                    <span class="priority-dropdown__text">
                      <span class="priority-dropdown__label">Urgent</span>
                    </span>
                    <span class="priority-dropdown__value">5</span>
                  </button>
                  <button
                    type="button"
                    class="priority-dropdown__option"
                    role="option"
                    data-value="4"
                    data-priority="4"
                    data-test-skedpal="task-priority-option-4"
                  >
                    <span class="priority-dropdown__icon" data-test-skedpal="task-priority-icon-4">
                      <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path
                          d="m4 16 6-6 4 4 6-6"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                        <path
                          d="M16 8h4v4"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                      </svg>
                    </span>
                    <span class="priority-dropdown__text">
                      <span class="priority-dropdown__label">Important</span>
                    </span>
                    <span class="priority-dropdown__value">4</span>
                  </button>
                  <button
                    type="button"
                    class="priority-dropdown__option"
                    role="option"
                    data-value="3"
                    data-priority="3"
                    data-test-skedpal="task-priority-option-3"
                  >
                    <span class="priority-dropdown__icon" data-test-skedpal="task-priority-icon-3">
                      <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path
                          d="M6 12h12"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                      </svg>
                    </span>
                    <span class="priority-dropdown__text">
                      <span class="priority-dropdown__label">Normal</span>
                    </span>
                    <span class="priority-dropdown__value">3</span>
                  </button>
                  <button
                    type="button"
                    class="priority-dropdown__option"
                    role="option"
                    data-value="2"
                    data-priority="2"
                    data-test-skedpal="task-priority-option-2"
                  >
                    <span class="priority-dropdown__icon" data-test-skedpal="task-priority-icon-2">
                      <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path
                          d="m20 8-6 6-4-4-6 6"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                      </svg>
                    </span>
                    <span class="priority-dropdown__text">
                      <span class="priority-dropdown__label">Can wait</span>
                    </span>
                    <span class="priority-dropdown__value">2</span>
                  </button>
                  <button
                    type="button"
                    class="priority-dropdown__option"
                    role="option"
                    data-value="1"
                    data-priority="1"
                    data-test-skedpal="task-priority-option-1"
                  >
                    <span class="priority-dropdown__icon" data-test-skedpal="task-priority-icon-1">
                      <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path
                          d="m18 10-6 6-6-6"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                        <path
                          d="M6 6h12"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        ></path>
                      </svg>
                    </span>
                    <span class="priority-dropdown__text">
                      <span class="priority-dropdown__label">Minimal</span>
                    </span>
                    <span class="priority-dropdown__value">1</span>
                  </button>
                  <div class="priority-dropdown__hint" data-test-skedpal="task-priority-hint">
                    Higher priority tasks are scheduled first.
                  </div>
                </div>
                <select
                  id="task-priority"
                  class="field-input priority-select sr-only"
                  data-test-skedpal="task-priority-select"
                >
                  <option value="5">Critical</option>
                  <option value="4">Important</option>
                  <option value="3" selected>Normal</option>
                  <option value="2">Can wait</option>
                  <option value="1">Minimal</option>
                </select>
              </div>
            </label>
            </div>
          </div>
        </div>
        <div
          class="task-modal__section"
          data-test-skedpal="task-modal-section-scheduling"
          data-collapsible="true"
          data-collapsed="true"
        >
          <div class="task-modal__section-header" data-test-skedpal="task-modal-section-scheduling-header">
            <div class="task-modal__section-icon" data-test-skedpal="task-modal-section-scheduling-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true" data-test-skedpal="task-modal-section-scheduling-icon-svg">
                <path
                  d="M7 3v3M17 3v3M4 9h16M5 5h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
            <div class="task-modal__section-text" data-test-skedpal="task-modal-section-scheduling-text">
              <p class="task-modal__section-title" data-test-skedpal="task-modal-section-scheduling-title">
                Scheduling
              </p>
            </div>
            <button
              type="button"
              class="task-modal__section-toggle"
              data-test-skedpal="task-modal-section-scheduling-toggle"
              aria-expanded="false"
              aria-controls="task-modal-section-scheduling-content"
            >
              <svg
                viewBox="0 0 20 20"
                aria-hidden="true"
                class="task-modal__section-toggle-icon"
                data-test-skedpal="task-modal-section-scheduling-toggle-icon"
              >
                <path
                  d="m5 7 5 5 5-5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </button>
          </div>
          <div
            class="task-modal__section-content"
            id="task-modal-section-scheduling-content"
            data-test-skedpal="task-modal-section-scheduling-content"
          >
            <div
              class="task-modal__section-grid task-modal__section-grid--two"
              data-test-skedpal="task-modal-section-scheduling-grid"
            >
            <label class="field">
              <span class="field-label">Start from</span>
              <div class="field-input-wrap" data-test-skedpal="task-start-from-wrap">
                <input
                  id="task-start-from"
                  type="text"
                  class="field-input field-input--clearable"
                  data-date-picker="true"
                  data-test-skedpal="task-start-from-input"
                />
                <button
                  type="button"
                  class="modal-close-btn field-clear-btn hidden"
                  aria-label="Clear start from date"
                  data-test-skedpal="task-start-from-clear"
                >
                  <svg
                    class="modal-close-icon"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    data-test-skedpal="modal-close-icon"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18 17.94 6M18 18 6.06 6"
                    ></path>
                  </svg>
                  <span class="sr-only" data-test-skedpal="modal-close-label">Clear date</span>
                </button>
              </div>
            </label>
            <label class="field">
              <span class="field-label">Deadline (optional)</span>
              <div class="field-input-wrap" data-test-skedpal="task-deadline-wrap">
                <input
                  id="task-deadline"
                  type="text"
                  class="field-input field-input--clearable"
                  data-date-picker="true"
                  data-test-skedpal="task-deadline-input"
                />
                <button
                  type="button"
                  class="modal-close-btn field-clear-btn hidden"
                  aria-label="Clear deadline date"
                  data-test-skedpal="task-deadline-clear"
                >
                  <svg
                    class="modal-close-icon"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    data-test-skedpal="modal-close-icon"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18 17.94 6M18 18 6.06 6"
                    ></path>
                  </svg>
                  <span class="sr-only" data-test-skedpal="modal-close-label">Clear date</span>
                </button>
              </div>
            </label>
              <label class="field task-modal__section-full">
                <span class="field-label">Repeat</span>
                <select id="task-repeat" class="field-input">
                  <option value="none" selected>Does not repeat</option>
                  <option value="custom">Saved pattern</option>
                  <option value="custom-new">Custom...</option>
                </select>
              </label>
            </div>
          </div>
        </div>
        <div
          class="task-modal__section"
          data-test-skedpal="task-modal-section-organization"
          data-collapsible="true"
          data-collapsed="true"
        >
          <div class="task-modal__section-header" data-test-skedpal="task-modal-section-organization-header">
            <div class="task-modal__section-icon" data-test-skedpal="task-modal-section-organization-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true" data-test-skedpal="task-modal-section-organization-icon-svg">
                <path
                  d="M4 6h7v5H4zM13 6h7v5h-7zM4 13h7v5H4zM13 13h7v5h-7z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
            <div class="task-modal__section-text" data-test-skedpal="task-modal-section-organization-text">
              <p class="task-modal__section-title" data-test-skedpal="task-modal-section-organization-title">
                Organization
              </p>
            </div>
            <button
              type="button"
              class="task-modal__section-toggle"
              data-test-skedpal="task-modal-section-organization-toggle"
              aria-expanded="false"
              aria-controls="task-modal-section-organization-content"
            >
              <svg
                viewBox="0 0 20 20"
                aria-hidden="true"
                class="task-modal__section-toggle-icon"
                data-test-skedpal="task-modal-section-organization-toggle-icon"
              >
                <path
                  d="m5 7 5 5 5-5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </button>
          </div>
          <div
            class="task-modal__section-content"
            id="task-modal-section-organization-content"
            data-test-skedpal="task-modal-section-organization-content"
          >
            <div
              class="task-modal__section-grid task-modal__section-grid--two"
              data-test-skedpal="task-modal-section-organization-grid"
            >
              <label class="field" data-test-skedpal="task-section-field">
                <span class="field-label">Section</span>
                <select id="task-section" class="field-input"></select>
              </label>
              <label class="field" data-test-skedpal="task-subsection-field">
                <span class="field-label">Subsection</span>
                <select id="task-subsection" class="field-input"></select>
              </label>
              <label
                class="field hidden"
                id="task-subtask-schedule-wrap"
                data-test-skedpal="task-subtask-schedule-wrap"
              >
                <span class="field-label">Subtask scheduling</span>
                <select
                  id="task-subtask-schedule"
                  class="field-input"
                  data-test-skedpal="task-subtask-schedule"
                >
                  <option value="parallel">Parallel</option>
                  <option value="sequential">Sequential</option>
                  <option value="sequential-single">Sequential (One at a time)</option>
                </select>
              </label>
              <label class="field" data-test-skedpal="task-template-field">
                <span class="field-label" data-test-skedpal="task-template-label">
                  Template (optional)
                </span>
                <select
                  id="task-template-select"
                  class="field-input"
                  data-test-skedpal="task-template-select"
                >
                  <option
                    value=""
                    selected
                    disabled
                    data-test-skedpal="task-template-select-placeholder"
                  >
                    Choose a template...
                  </option>
                </select>
              </label>
            </div>
          </div>
        </div>
        <div
          class="task-modal__section"
          data-test-skedpal="task-modal-section-link"
          data-collapsible="true"
          data-collapsed="true"
        >
          <div class="task-modal__section-header" data-test-skedpal="task-modal-section-link-header">
            <div class="task-modal__section-icon" data-test-skedpal="task-modal-section-link-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true" data-test-skedpal="task-modal-section-link-icon-svg">
                <path
                  d="M10 14a4 4 0 0 0 6 0l3-3a4 4 0 0 0-6-6l-1.5 1.5M14 10a4 4 0 0 0-6 0l-3 3a4 4 0 0 0 6 6l1.5-1.5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
            <div class="task-modal__section-text" data-test-skedpal="task-modal-section-link-text">
              <p class="task-modal__section-title" data-test-skedpal="task-modal-section-link-title">
                Link (optional)
              </p>
            </div>
            <button
              type="button"
              class="task-modal__section-toggle"
              data-test-skedpal="task-modal-section-link-toggle"
              aria-expanded="false"
              aria-controls="task-modal-section-link-content"
            >
              <svg
                viewBox="0 0 20 20"
                aria-hidden="true"
                class="task-modal__section-toggle-icon"
                data-test-skedpal="task-modal-section-link-toggle-icon"
              >
                <path
                  d="m5 7 5 5 5-5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </button>
          </div>
          <div
            class="task-modal__section-content"
            id="task-modal-section-link-content"
            data-test-skedpal="task-modal-section-link-content"
          >
            <label class="field" data-test-skedpal="task-link-field">
              <div class="field-input-wrap" data-test-skedpal="task-link-wrap">
                <input
                  id="task-link"
                  placeholder="https://example.com/details"
                  class="field-input field-input--clearable"
                  data-test-skedpal="task-link-input"
                />
                <button
                  type="button"
                  class="modal-close-btn field-clear-btn hidden"
                  aria-label="Clear link"
                  data-test-skedpal="task-link-clear"
                >
                  <svg
                    class="modal-close-icon"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    data-test-skedpal="modal-close-icon"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18 17.94 6M18 18 6.06 6"
                    ></path>
                  </svg>
                  <span class="sr-only" data-test-skedpal="modal-close-label">Clear link</span>
                </button>
              </div>
            </label>
          </div>
        </div>
        <div
          class="task-modal__section"
          data-test-skedpal="task-modal-section-assistant"
          data-collapsible="true"
          data-collapsed="true"
        >
          <div class="task-modal__section-header" data-test-skedpal="task-modal-section-assistant-header">
            <div class="task-modal__section-icon" data-test-skedpal="task-modal-section-assistant-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true" data-test-skedpal="task-modal-section-assistant-icon-svg">
                <path
                  d="M12 3v2M4.5 7.5 6 9M19.5 7.5 18 9M4 14h3m10 0h3M8.5 18.5 7 20m9.5-1.5 1.5 1.5M9 14a3 3 0 1 0 6 0c0-2-1.5-3-3-3s-3 1-3 3Z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
            <div class="task-modal__section-text" data-test-skedpal="task-modal-section-assistant-text">
              <p class="task-modal__section-title" data-test-skedpal="task-modal-section-assistant-title">
                Assistant
              </p>
            </div>
            <button
              type="button"
              class="task-modal__section-toggle"
              data-test-skedpal="task-modal-section-assistant-toggle"
              aria-expanded="false"
              aria-controls="task-modal-section-assistant-content"
            >
              <svg
                viewBox="0 0 20 20"
                aria-hidden="true"
                class="task-modal__section-toggle-icon"
                data-test-skedpal="task-modal-section-assistant-toggle-icon"
              >
                <path
                  d="m5 7 5 5 5-5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </button>
          </div>
          <div
            class="task-modal__section-content"
            id="task-modal-section-assistant-content"
            data-test-skedpal="task-modal-section-assistant-content"
          >
            <div class="task-ai-panel" data-test-skedpal="task-ai-panel">
              <div class="task-ai-header" data-test-skedpal="task-ai-header">
                <div>
                  <div class="task-ai-title" data-test-skedpal="task-ai-title">Groq AI helper</div>
                  <p class="task-ai-subtitle" data-test-skedpal="task-ai-subtitle">
                    Use the title to generate a task list with subtasks.
                  </p>
                </div>
                <button
                  type="button"
                  id="task-ai-generate"
                  class="btn ghost task-ai-btn"
                  data-test-skedpal="task-ai-generate"
                >
                  Help me create a list
                </button>
              </div>
              <div id="task-ai-status" class="task-ai-status hidden" data-test-skedpal="task-ai-status"></div>
              <div id="task-ai-output" class="task-ai-output hidden" data-test-skedpal="task-ai-output"></div>
            </div>
          </div>
        </div>
        <div
          class="task-modal__section"
          data-test-skedpal="task-modal-section-timemaps"
          data-collapsible="true"
          data-collapsed="true"
        >
          <div class="task-modal__section-header" data-test-skedpal="task-modal-section-timemaps-header">
            <div class="task-modal__section-icon" data-test-skedpal="task-modal-section-timemaps-icon">
              <svg viewBox="0 0 24 24" aria-hidden="true" data-test-skedpal="task-modal-section-timemaps-icon-svg">
                <path
                  d="M4 6h10M4 12h16M4 18h7"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </div>
            <div class="task-modal__section-text" data-test-skedpal="task-modal-section-timemaps-text">
              <p class="task-modal__section-title" data-test-skedpal="task-modal-section-timemaps-title">
                Allowed TimeMaps
              </p>
            </div>
            <button
              type="button"
              class="task-modal__section-toggle"
              data-test-skedpal="task-modal-section-timemaps-toggle"
              aria-expanded="false"
              aria-controls="task-modal-section-timemaps-content"
            >
              <svg
                viewBox="0 0 20 20"
                aria-hidden="true"
                class="task-modal__section-toggle-icon"
                data-test-skedpal="task-modal-section-timemaps-toggle-icon"
              >
                <path
                  d="m5 7 5 5 5-5"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </button>
          </div>
          <div
            class="task-modal__section-content"
            id="task-modal-section-timemaps-content"
            data-test-skedpal="task-modal-section-timemaps-content"
          >
            <div id="task-timemap-options" class="timemap-pills" data-test-skedpal="task-timemap-options"></div>
          </div>
        </div>
      </div>
      <div class="task-modal__actions task-modal__actions--spaced" data-test-skedpal="task-modal-actions">
        <button type="button" class="btn muted" data-task-modal-close>Cancel</button>
        <button type="submit" class="btn primary" data-test-skedpal="task-modal-submit">Save Task</button>
      </div>
    </form>
  </div>
</div>
<div
  id="calendar-create-modal"
  class="task-modal calendar-create-modal hidden"
  data-test-skedpal="calendar-create-modal"
>
  <div class="task-modal__panel task-modal__panel--task" data-test-skedpal="calendar-create-panel">
    <div class="task-modal__header task-modal__header--task">
      <div>
        <div class="task-modal__eyebrow" data-test-skedpal="calendar-create-eyebrow">
          Google Calendar
        </div>
        <h3 class="task-modal__title" data-test-skedpal="calendar-create-title-text">
          New event
        </h3>
        <p class="task-modal__subtitle" data-test-skedpal="calendar-create-subtitle">
          Add an event to Google Calendar.
        </p>
      </div>
      <button
        type="button"
        class="modal-close-btn modal-close-btn--sm"
        data-calendar-create-close
        data-test-skedpal="calendar-create-close"
        aria-label="Close create event modal"
      >
        <svg class="modal-close-icon modal-close-icon--sm" viewBox="0 0 20 20" aria-hidden="true">
          <path d="m5 5 10 10M15 5 5 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
        </svg>
      </button>
    </div>
    <form id="calendar-create-form" class="task-modal__form" data-test-skedpal="calendar-create-form">
      <div class="task-form-grid task-form-grid--task" data-test-skedpal="calendar-create-grid">
        <label class="field task-form-grid__full" data-test-skedpal="calendar-create-title-field">
          <span class="field-label">Title</span>
          <input
            id="calendar-create-title"
            class="field-input"
            type="text"
            placeholder="Add title"
            autocomplete="off"
            data-test-skedpal="calendar-create-title-input"
          />
        </label>
        <label class="field task-form-grid__full" data-test-skedpal="calendar-create-calendar-field">
          <span class="field-label">Calendar</span>
          <select
            id="calendar-create-calendar"
            class="field-input"
            data-test-skedpal="calendar-create-calendar-select"
          ></select>
        </label>
        <label class="field" data-test-skedpal="calendar-create-date-field">
          <span class="field-label">Date</span>
          <input
            id="calendar-create-date"
            class="field-input"
            type="text"
            data-date-picker="true"
            data-test-skedpal="calendar-create-date-input"
          />
        </label>
        <label class="field" data-test-skedpal="calendar-create-time-field">
          <span class="field-label">Start</span>
          <input
            id="calendar-create-time"
            class="field-input"
            type="time"
            step="900"
            data-test-skedpal="calendar-create-time-input"
          />
        </label>
        <label class="field" data-test-skedpal="calendar-create-duration-field">
          <span class="field-label">Duration (min)</span>
          <input
            id="calendar-create-duration"
            class="field-input"
            type="number"
            min="15"
            step="15"
            value="60"
            data-test-skedpal="calendar-create-duration-input"
          />
        </label>
      </div>
      <div class="task-modal__actions" data-test-skedpal="calendar-create-actions">
        <button
          type="button"
          class="btn muted"
          data-calendar-create-close
          data-test-skedpal="calendar-create-cancel"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="btn primary"
          data-test-skedpal="calendar-create-submit"
        >
          Create event
        </button>
      </div>
    </form>
  </div>
</div>
<div id="repeat-complete-modal" class="task-modal hidden" data-test-skedpal="repeat-complete-modal">
  <div class="task-modal__panel">
    <div class="task-modal__header">
      <div>
        <p class="task-modal__eyebrow">Complete occurrence</p>
        <h3 class="task-modal__title">Select an occurrence</h3>
        <p class="task-modal__subtitle">Pick which upcoming repeat to mark complete.</p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-repeat-complete-close
        aria-label="Close complete modal"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <div class="task-modal__form">
      <div class="space-y-2" id="repeat-complete-list" data-test-skedpal="repeat-complete-list"></div>
      <p class="text-sm text-slate-400 hidden" id="repeat-complete-empty" data-test-skedpal="repeat-complete-empty">
        No upcoming occurrences available.
      </p>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-repeat-complete-close>Cancel</button>
      </div>
    </div>
  </div>
</div>
<div
  id="task-reminder-modal"
  class="task-modal task-reminder-modal hidden"
  data-test-skedpal="task-reminder-modal"
>
  <div class="task-modal__panel task-modal__panel--task" data-test-skedpal="task-reminder-panel">
    <div class="task-modal__header task-modal__header--task">
      <div>
        <p class="task-modal__eyebrow" data-test-skedpal="task-reminder-eyebrow">Reminders</p>
        <h3 class="task-modal__title" data-test-skedpal="task-reminder-title">Remind me</h3>
        <p class="task-modal__subtitle" data-test-skedpal="task-reminder-subtitle">
          Select how many days from now you want a reminder.
        </p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-reminder-modal-close
        aria-label="Close reminder modal"
        data-test-skedpal="task-reminder-close"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <div class="task-modal__form" data-test-skedpal="task-reminder-form">
      <div class="space-y-2" data-test-skedpal="task-reminder-days-wrap">
        <span class="field-label">Remind me in</span>
        <div
          id="task-reminder-days"
          class="flex flex-wrap gap-2"
          data-test-skedpal="task-reminder-days"
        ></div>
      </div>
      <div class="mt-3 space-y-2" data-test-skedpal="task-reminder-custom-wrap">
        <span class="field-label">Custom days</span>
        <div class="flex flex-wrap items-center gap-2">
          <input
            id="task-reminder-custom"
            type="number"
            min="1"
            class="field-input w-24"
            placeholder="3"
            data-test-skedpal="task-reminder-custom"
          />
          <button
            type="button"
            class="rounded-lg border-slate-700 px-3 py-1 text-xs font-semibold text-slate-200 hover:border-lime-400"
            id="task-reminder-custom-add"
            data-test-skedpal="task-reminder-custom-add"
          >
            Add
          </button>
        </div>
      </div>
      <div class="mt-3 hidden" id="task-reminder-existing" data-test-skedpal="task-reminder-existing">
        <span class="field-label">Existing reminders</span>
        <div
          class="space-y-2"
          id="task-reminder-existing-list"
          data-test-skedpal="task-reminder-existing-list"
        ></div>
      </div>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-reminder-modal-close>Cancel</button>
        <button type="button" class="btn primary" id="task-reminder-save" data-test-skedpal="task-reminder-save">
          Save reminders
        </button>
      </div>
    </div>
  </div>
</div>
<div
  id="calendar-event-modal"
  class="task-modal calendar-event-modal-overlay hidden"
  data-test-skedpal="calendar-event-modal"
>
  <div class="task-modal__panel calendar-event-modal__panel">
    <div class="task-modal__header calendar-event-modal__header">
      <div>
        <p
          id="calendar-event-modal-eyebrow"
          class="task-modal__eyebrow"
          data-test-skedpal="calendar-event-modal-eyebrow"
        >
          Scheduled task
        </p>
        <h3
          id="calendar-event-modal-title"
          class="task-modal__title"
          data-test-skedpal="calendar-event-modal-title"
        ></h3>
        <p
          id="calendar-event-modal-time"
          class="task-modal__subtitle"
          data-test-skedpal="calendar-event-modal-time"
        ></p>
      </div>
      <div class="calendar-event-modal__actions" data-test-skedpal="calendar-event-modal-actions">
        <button
          type="button"
          class="modal-close-btn"
          data-calendar-event-close
          aria-label="Close task preview"
          data-test-skedpal="calendar-event-modal-close"
        >
          <svg
            class="modal-close-icon"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            data-test-skedpal="modal-close-icon"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18 17.94 6M18 18 6.06 6"
            ></path>
          </svg>
          <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
        </button>
      </div>
    </div>
    <div class="task-modal__form calendar-event-modal__body">
      <div
        id="calendar-event-modal-details"
        class="calendar-event-modal__details"
        data-test-skedpal="calendar-event-modal-details"
      ></div>
      <div
        id="calendar-event-modal-toolbar"
        class="calendar-event-modal__toolbar"
        data-test-skedpal="calendar-event-modal-toolbar"
      >
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="complete"
          data-test-skedpal="calendar-event-modal-complete-btn"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="zoom"
          data-test-skedpal="calendar-event-modal-zoom"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="defer"
          data-test-skedpal="calendar-event-modal-defer"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="edit"
          data-test-skedpal="calendar-event-modal-edit"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="delete"
          data-test-skedpal="calendar-event-modal-delete"
        ></button>
        <input
          id="calendar-event-modal-defer-date"
          type="text"
          class="calendar-event-modal__defer-input"
          data-date-picker="true"
          data-test-skedpal="calendar-event-modal-defer-date"
        />
      </div>
    </div>
  </div>
</div>
<div
  id="date-picker-modal"
  class="task-modal date-picker-modal hidden"
  data-test-skedpal="date-picker-modal"
>
  <div class="task-modal__panel date-picker-panel" data-test-skedpal="date-picker-panel">
    <div class="date-picker-header" data-test-skedpal="date-picker-header">
      <div class="date-picker-header__icon" data-test-skedpal="date-picker-header-icon">
        <svg viewBox="0 0 24 24" aria-hidden="true" data-test-skedpal="date-picker-icon">
          <path
            d="M7 3v3M17 3v3M4 9h16M5 5h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></path>
        </svg>
      </div>
      <div class="date-picker-header__text" data-test-skedpal="date-picker-header-text">
        <p class="date-picker-title" data-test-skedpal="date-picker-title">Choose a Date</p>
        <p
          id="date-picker-subtitle"
          class="date-picker-subtitle"
          data-test-skedpal="date-picker-subtitle"
        ></p>
      </div>
      <button
        type="button"
        class="modal-close-btn date-picker-close"
        data-date-picker-close
        aria-label="Close date picker"
        data-test-skedpal="date-picker-close"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="date-picker-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="date-picker-close-label">Close date picker</span>
      </button>
    </div>
    <div class="date-picker-body" data-test-skedpal="date-picker-body">
      <div class="date-picker-quick" data-test-skedpal="date-picker-quick">
        <div class="date-picker-card" data-test-skedpal="date-picker-card-soon">
          <div class="date-picker-card-title" data-test-skedpal="date-picker-card-title-soon">
            <span class="date-picker-card-label">Soon</span>
          </div>
          <div
            id="date-picker-quick-soon"
            class="date-picker-quick-list"
            data-test-skedpal="date-picker-quick-soon"
          ></div>
        </div>
        <div class="date-picker-card" data-test-skedpal="date-picker-card-month">
          <div class="date-picker-card-title" data-test-skedpal="date-picker-card-title-month">
            <span class="date-picker-card-label">This Month</span>
          </div>
          <div
            id="date-picker-quick-month"
            class="date-picker-quick-list"
            data-test-skedpal="date-picker-quick-month"
          ></div>
        </div>
        <div class="date-picker-card" data-test-skedpal="date-picker-card-later">
          <div class="date-picker-card-title" data-test-skedpal="date-picker-card-title-later">
            <span class="date-picker-card-label">Later</span>
          </div>
          <div
            id="date-picker-quick-later"
            class="date-picker-quick-list"
            data-test-skedpal="date-picker-quick-later"
          ></div>
        </div>
      </div>
      <div class="date-picker-calendar" data-test-skedpal="date-picker-calendar">
        <div class="date-picker-calendar-header" data-test-skedpal="date-picker-calendar-header">
          <button
            type="button"
            class="date-picker-nav-btn"
            data-date-picker-prev
            aria-label="Previous month"
            data-test-skedpal="date-picker-prev"
          >
            <svg viewBox="0 0 20 20" aria-hidden="true" data-test-skedpal="date-picker-prev-icon">
              <path d="M12.5 4.5 7 10l5.5 5.5" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>
          <div id="date-picker-month" class="date-picker-month" data-test-skedpal="date-picker-month"></div>
          <button
            type="button"
            class="date-picker-nav-btn"
            data-date-picker-next
            aria-label="Next month"
            data-test-skedpal="date-picker-next"
          >
            <svg viewBox="0 0 20 20" aria-hidden="true" data-test-skedpal="date-picker-next-icon">
              <path d="M7.5 4.5 13 10l-5.5 5.5" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </button>
        </div>
        <div class="date-picker-weekdays" data-test-skedpal="date-picker-weekdays">
          <span class="date-picker-weekday" data-test-skedpal="date-picker-weekday">S</span>
          <span class="date-picker-weekday" data-test-skedpal="date-picker-weekday">M</span>
          <span class="date-picker-weekday" data-test-skedpal="date-picker-weekday">T</span>
          <span class="date-picker-weekday" data-test-skedpal="date-picker-weekday">W</span>
          <span class="date-picker-weekday" data-test-skedpal="date-picker-weekday">T</span>
          <span class="date-picker-weekday" data-test-skedpal="date-picker-weekday">F</span>
          <span class="date-picker-weekday" data-test-skedpal="date-picker-weekday">S</span>
        </div>
        <div
          id="date-picker-grid"
          class="date-picker-grid"
          data-test-skedpal="date-picker-grid"
        ></div>
        <button
          type="button"
          id="date-picker-jump"
          class="date-picker-jump"
          data-test-skedpal="date-picker-jump"
        >
          Jump to Today
        </button>
      </div>
    </div>
  </div>
</div>
<div id="subsection-form-wrap" class="task-modal hidden">
  <div class="task-modal__panel">
    <div class="task-modal__header">
      <div>
        <p class="task-modal__eyebrow">Subsection</p>
        <h3 class="task-modal__title">Add subsection</h3>
        <p class="task-modal__subtitle">Define a subsection and default task settings it should inherit.</p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-subsection-modal-close
        aria-label="Close subsection form"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <form id="subsection-form" class="task-modal__form">
      <input type="hidden" id="subsection-section-id" />
      <input type="hidden" id="subsection-parent-id" />
      <div class="task-form-grid">
        <label class="field">
          <span class="field-label">Subsection name</span>
          <input id="subsection-name" required placeholder="Planning, Backlog, etc." class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default task title</span>
          <input id="subsection-task-title" placeholder="Optional default title" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default link</span>
          <input id="subsection-task-link" placeholder="https://example.com" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default duration (minutes)</span>
          <input
            id="subsection-task-duration"
            type="number"
            min="15"
            step="15"
            value="30"
            class="field-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Default min block length (minutes)</span>
          <input
            id="subsection-task-min-block"
            type="number"
            min="15"
            step="15"
            value="30"
            class="field-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Default priority</span>
          <select
            id="subsection-task-priority"
            class="field-input priority-select"
            data-test-skedpal="subsection-task-priority-select"
          >
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3" selected>3</option>
            <option value="2">2</option>
            <option value="1">1</option>
          </select>
        </label>
        <label class="field">
          <span class="field-label">Default deadline</span>
          <input
            id="subsection-task-deadline"
            type="text"
            class="field-input"
            data-date-picker="true"
            data-test-skedpal="subsection-task-deadline-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Default start from</span>
          <input
            id="subsection-task-start-from"
            type="text"
            class="field-input"
            data-date-picker="true"
            data-test-skedpal="subsection-task-start-from-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Default repeat</span>
          <select id="subsection-task-repeat" class="field-input">
            <option value="none" selected>Does not repeat</option>
            <option value="custom">Saved pattern</option>
            <option value="custom-new">Custom...</option>
          </select>
        </label>
        <label
          class="field"
          id="subsection-task-subtask-schedule-wrap"
          data-test-skedpal="subsection-subtask-schedule-wrap"
        >
          <span class="field-label">Subtask scheduling</span>
          <select
            id="subsection-task-subtask-schedule"
            class="field-input"
            data-test-skedpal="subsection-subtask-schedule"
          >
            <option value="parallel">Parallel</option>
            <option value="sequential">Sequential</option>
            <option value="sequential-single">Sequential (One at a time)</option>
          </select>
        </label>
      </div>
      <div class="field">
        <span class="field-label">Allowed TimeMaps</span>
        <div id="subsection-timemap-options" class="timemap-pills"></div>
      </div>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-subsection-modal-close>Cancel</button>
        <button type="submit" class="btn primary">Save Subsection</button>
      </div>
    </form>
  </div>
</div>
<div id="repeat-modal" class="task-modal hidden">
  <div class="task-modal__panel">
    <div class="task-modal__header">
      <div>
        <p class="task-modal__eyebrow">Repeat</p>
        <h3 class="task-modal__title">Custom recurrence</h3>
        <p class="task-modal__subtitle">Set up a repeating pattern similar to Google Calendar.</p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-repeat-modal-close
        aria-label="Close repeat modal"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <div class="task-modal__form" id="task-repeat-custom">
      <div class="grid md:grid-cols-[140px_1fr] gap-3 items-center">
        <span class="field-label">Repeat every</span>
        <div class="flex items-center gap-3">
          <input
            id="task-repeat-interval"
            type="number"
            min="1"
            value="1"
            class="field-input"
            style="max-width: 110px"
          />
          <select id="task-repeat-unit" class="field-input" style="max-width: 150px">
            <option value="day">day</option>
            <option value="week">week</option>
            <option value="month">month</option>
            <option value="year">year</option>
          </select>
        </div>
      </div>
      <div
        class="mt-3 hidden"
        id="task-repeat-weekly-section"
        data-test-skedpal="task-repeat-weekly-section"
      >
        <div class="space-y-2">
          <span class="field-label">Repeat</span>
          <label
            class="flex items-start gap-2 text-xs text-slate-200"
            data-test-skedpal="task-repeat-weekly-mode-any-label"
          >
            <input
              type="radio"
              name="task-repeat-weekly-mode"
              id="task-repeat-weekly-mode-any"
              value="any"
              data-test-skedpal="task-repeat-weekly-mode-any"
            />
            <span>
              Repeat
              <span data-test-skedpal="task-repeat-weekly-any-count">1</span>
              time(s) a week on any selected days
            </span>
          </label>
          <label
            class="flex items-start gap-2 text-xs text-slate-200"
            data-test-skedpal="task-repeat-weekly-mode-all-label"
          >
            <input
              type="radio"
              name="task-repeat-weekly-mode"
              id="task-repeat-weekly-mode-all"
              value="all"
              data-test-skedpal="task-repeat-weekly-mode-all"
              checked
            />
            <span>
              Repeat
              <span data-test-skedpal="task-repeat-weekly-all-count">1</span>
              time(s) on every selected day
            </span>
          </label>
        </div>
        <div class="mt-4" data-test-skedpal="task-repeat-weekly-days-wrap">
          <span class="field-label">Repeat on</span>
          <div
            class="flex flex-wrap gap-2"
            id="task-repeat-weekdays"
            data-test-skedpal="task-repeat-weekdays"
          ></div>
        </div>
      </div>
      <div class="mt-3 hidden" id="task-repeat-monthly-section">
        <label class="field">
          <span class="field-label">Monthly options</span>
          <select id="task-repeat-monthly-mode" class="field-input" data-test-skedpal="task-repeat-monthly-mode">
            <option value="day">Monthly on day</option>
            <option value="nth">Monthly on the</option>
          </select>
        </label>
        <div class="grid md:grid-cols-2 gap-3 mt-2">
          <label class="field" id="task-repeat-monthly-day-wrap">
            <span class="field-label">Day of month</span>
            <input id="task-repeat-monthly-day" type="number" min="1" max="31" class="field-input" />
          </label>
          <div class="grid grid-cols-2 gap-2" id="task-repeat-monthly-nth-wrap">
            <label class="field">
              <span class="field-label">Nth</span>
              <select id="task-repeat-monthly-nth" class="field-input">
                <option value="1">First</option>
                <option value="2">Second</option>
                <option value="3">Third</option>
                <option value="4">Fourth</option>
                <option value="-1">Last</option>
              </select>
            </label>
            <label class="field">
              <span class="field-label">Weekday</span>
              <select id="task-repeat-monthly-weekday" class="field-input">
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
                <option value="2">Tuesday</option>
                <option value="3">Wednesday</option>
                <option value="4">Thursday</option>
                <option value="5">Friday</option>
                <option value="6">Saturday</option>
              </select>
            </label>
          </div>
        </div>
      </div>
      <div class="mt-3 hidden" id="task-repeat-yearly-section" data-test-skedpal="task-repeat-yearly-section">
        <div
          class="grid md:grid-cols-2 gap-3"
          id="task-repeat-yearly-range-wrap"
          data-test-skedpal="task-repeat-yearly-range-wrap"
        >
          <label class="field" data-test-skedpal="task-repeat-yearly-range-start-field">
            <span class="field-label">Range start</span>
            <input
              id="task-repeat-yearly-range-start"
              type="text"
              class="field-input"
              data-date-picker="true"
              data-test-skedpal="task-repeat-yearly-range-start"
            />
          </label>
          <label class="field" data-test-skedpal="task-repeat-yearly-range-end-field">
            <span class="field-label">Range end</span>
            <input
              id="task-repeat-yearly-range-end"
              type="text"
              class="field-input"
              data-date-picker="true"
              data-test-skedpal="task-repeat-yearly-range-end"
            />
          </label>
        </div>
      </div>
      <div class="mt-3 space-y-2">
        <span class="field-label">Ends</span>
        <label class="flex items-center gap-2 text-xs text-slate-200">
          <input type="radio" name="task-repeat-end" id="task-repeat-end-never" value="never" checked />
          <span>Never</span>
        </label>
        <label class="flex items-center gap-2 text-xs text-slate-200">
          <input type="radio" name="task-repeat-end" id="task-repeat-end-on" value="on" />
          <span>On</span>
          <input
            type="text"
            id="task-repeat-end-date"
            class="field-input"
            style="max-width: 180px"
            data-date-picker="true"
            data-test-skedpal="task-repeat-end-date"
          />
        </label>
        <label class="flex items-center gap-2 text-xs text-slate-200">
          <input type="radio" name="task-repeat-end" id="task-repeat-end-after" value="after" />
          <span>After</span>
          <input
            type="number"
            min="1"
            value="1"
            id="task-repeat-end-count"
            class="field-input"
            style="max-width: 120px"
          />
          <span>occurrence(s)</span>
        </label>
      </div>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-repeat-modal-close>Cancel</button>
        <button type="button" class="btn primary" id="task-repeat-save">Save repeat</button>
      </div>
    </div>
  </div>
</div>
