<div id="task-form-wrap" class="task-modal hidden">
  <div
    class="task-modal__panel task-modal__panel--task"
    data-test-skedpal="task-modal-panel"
  >
    <div class="task-modal__header task-modal__header--task" data-test-skedpal="task-modal-header">
      <div>
        <p class="task-modal__eyebrow">Task intake</p>
        <h3 class="task-modal__title">Plan a new task</h3>
        <p class="task-modal__subtitle">Set deadline, duration, and allowed TimeMaps before scheduling.</p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-task-modal-close
        aria-label="Close task form"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <form id="task-form" class="task-modal__form task-modal__form--task" data-test-skedpal="task-modal-form">
      <input type="hidden" id="task-id" />
      <input type="hidden" id="task-parent-id" />
      <div class="task-form-grid task-form-grid--task" data-test-skedpal="task-form-grid">
        <label class="field task-form-grid__full" data-test-skedpal="task-title-field">
          <span class="field-label">Title</span>
          <input
            id="task-title"
            required
            placeholder="Write a short task title"
            class="field-input"
            data-test-skedpal="task-title-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Link (optional)</span>
          <div class="field-input-wrap" data-test-skedpal="task-link-wrap">
            <input
              id="task-link"
              placeholder="https://example.com/details"
              class="field-input field-input--clearable"
              data-test-skedpal="task-link-input"
            />
            <button
              type="button"
              class="modal-close-btn field-clear-btn hidden"
              aria-label="Clear link"
              data-test-skedpal="task-link-clear"
            >
              <svg
                class="modal-close-icon"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                data-test-skedpal="modal-close-icon"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18 17.94 6M18 18 6.06 6"
                ></path>
              </svg>
              <span class="sr-only" data-test-skedpal="modal-close-label">Clear link</span>
            </button>
          </div>
        </label>
        <label class="field">
          <span class="field-label">Duration (minutes)</span>
          <input
            id="task-duration"
            type="number"
            min="15"
            step="15"
            value="30"
            required
            placeholder="30"
            class="field-input"
          />
          <span
            id="task-duration-helper"
            class="mt-1 text-xs text-slate-400"
            data-test-skedpal="task-duration-helper"
          ></span>
        </label>
        <label class="field">
          <span class="field-label">Min block length (minutes)</span>
          <input
            id="task-min-block"
            type="number"
            min="15"
            step="15"
            value="30"
            placeholder="30"
            class="field-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Priority (1 low â€“ 5 high)</span>
          <select
            id="task-priority"
            class="field-input priority-select"
            data-test-skedpal="task-priority-select"
          >
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3" selected>3</option>
            <option value="2">2</option>
            <option value="1">1</option>
          </select>
        </label>
        <label class="field">
          <span class="field-label">Deadline</span>
          <input id="task-deadline" type="date" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Start from</span>
          <input id="task-start-from" type="date" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Repeat</span>
          <select id="task-repeat" class="field-input">
            <option value="none" selected>Does not repeat</option>
            <option value="custom">Saved pattern</option>
            <option value="custom-new">Custom...</option>
          </select>
        </label>
        <label class="field">
          <span class="field-label">Section</span>
          <select id="task-section" class="field-input"></select>
        </label>
        <label class="field">
          <span class="field-label">Subsection</span>
          <select id="task-subsection" class="field-input"></select>
        </label>
        <label
          class="field hidden"
          id="task-subtask-schedule-wrap"
          data-test-skedpal="task-subtask-schedule-wrap"
        >
          <span class="field-label">Subtask scheduling</span>
          <select
            id="task-subtask-schedule"
            class="field-input"
            data-test-skedpal="task-subtask-schedule"
          >
            <option value="parallel">Parallel</option>
            <option value="sequential">Sequential</option>
            <option value="sequential-single">Sequential (One at a time)</option>
          </select>
        </label>
      </div>
      <div class="field">
        <span class="field-label">Allowed TimeMaps</span>
        <div id="task-timemap-options" class="timemap-pills"></div>
      </div>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-task-modal-close>Cancel</button>
        <button type="submit" class="btn primary">Save Task</button>
      </div>
    </form>
  </div>
</div>
<div id="repeat-complete-modal" class="task-modal hidden" data-test-skedpal="repeat-complete-modal">
  <div class="task-modal__panel">
    <div class="task-modal__header">
      <div>
        <p class="task-modal__eyebrow">Complete occurrence</p>
        <h3 class="task-modal__title">Select an occurrence</h3>
        <p class="task-modal__subtitle">Pick which upcoming repeat to mark complete.</p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-repeat-complete-close
        aria-label="Close complete modal"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <div class="task-modal__form">
      <div class="space-y-2" id="repeat-complete-list" data-test-skedpal="repeat-complete-list"></div>
      <p class="text-sm text-slate-400 hidden" id="repeat-complete-empty" data-test-skedpal="repeat-complete-empty">
        No upcoming occurrences available.
      </p>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-repeat-complete-close>Cancel</button>
      </div>
    </div>
  </div>
</div>
<div
  id="calendar-event-modal"
  class="task-modal calendar-event-modal-overlay hidden"
  data-test-skedpal="calendar-event-modal"
>
  <div class="task-modal__panel calendar-event-modal__panel">
    <div class="task-modal__header calendar-event-modal__header">
      <div>
        <p class="task-modal__eyebrow">Scheduled task</p>
        <h3
          id="calendar-event-modal-title"
          class="task-modal__title"
          data-test-skedpal="calendar-event-modal-title"
        ></h3>
        <p
          id="calendar-event-modal-time"
          class="task-modal__subtitle"
          data-test-skedpal="calendar-event-modal-time"
        ></p>
      </div>
      <div class="calendar-event-modal__actions" data-test-skedpal="calendar-event-modal-actions">
        <button
          type="button"
          class="modal-close-btn"
          data-calendar-event-close
          aria-label="Close task preview"
          data-test-skedpal="calendar-event-modal-close"
        >
          <svg
            class="modal-close-icon"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            data-test-skedpal="modal-close-icon"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18 17.94 6M18 18 6.06 6"
            ></path>
          </svg>
          <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
        </button>
      </div>
    </div>
    <div class="task-modal__form calendar-event-modal__body">
      <div
        id="calendar-event-modal-details"
        class="calendar-event-modal__details"
        data-test-skedpal="calendar-event-modal-details"
      ></div>
      <div class="calendar-event-modal__toolbar" data-test-skedpal="calendar-event-modal-toolbar">
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="complete"
          data-test-skedpal="calendar-event-modal-complete-btn"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="zoom"
          data-test-skedpal="calendar-event-modal-zoom"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="defer"
          data-test-skedpal="calendar-event-modal-defer"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="edit"
          data-test-skedpal="calendar-event-modal-edit"
        ></button>
        <button
          type="button"
          class="calendar-event-modal__icon-btn"
          data-calendar-event-action="delete"
          data-test-skedpal="calendar-event-modal-delete"
        ></button>
        <input
          id="calendar-event-modal-defer-date"
          type="date"
          class="calendar-event-modal__defer-input"
          data-test-skedpal="calendar-event-modal-defer-date"
        />
      </div>
    </div>
  </div>
</div>
<div id="subsection-form-wrap" class="task-modal hidden">
  <div class="task-modal__panel">
    <div class="task-modal__header">
      <div>
        <p class="task-modal__eyebrow">Subsection</p>
        <h3 class="task-modal__title">Add subsection</h3>
        <p class="task-modal__subtitle">Define a subsection and default task settings it should inherit.</p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-subsection-modal-close
        aria-label="Close subsection form"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <form id="subsection-form" class="task-modal__form">
      <input type="hidden" id="subsection-section-id" />
      <input type="hidden" id="subsection-parent-id" />
      <div class="task-form-grid">
        <label class="field">
          <span class="field-label">Subsection name</span>
          <input id="subsection-name" required placeholder="Planning, Backlog, etc." class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default task title</span>
          <input id="subsection-task-title" placeholder="Optional default title" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default link</span>
          <input id="subsection-task-link" placeholder="https://example.com" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default duration (minutes)</span>
          <input
            id="subsection-task-duration"
            type="number"
            min="15"
            step="15"
            value="30"
            class="field-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Default min block length (minutes)</span>
          <input
            id="subsection-task-min-block"
            type="number"
            min="15"
            step="15"
            value="30"
            class="field-input"
          />
        </label>
        <label class="field">
          <span class="field-label">Default priority</span>
          <select
            id="subsection-task-priority"
            class="field-input priority-select"
            data-test-skedpal="subsection-task-priority-select"
          >
            <option value="5">5</option>
            <option value="4">4</option>
            <option value="3" selected>3</option>
            <option value="2">2</option>
            <option value="1">1</option>
          </select>
        </label>
        <label class="field">
          <span class="field-label">Default deadline</span>
          <input id="subsection-task-deadline" type="date" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default start from</span>
          <input id="subsection-task-start-from" type="date" class="field-input" />
        </label>
        <label class="field">
          <span class="field-label">Default repeat</span>
          <select id="subsection-task-repeat" class="field-input">
            <option value="none" selected>Does not repeat</option>
            <option value="custom">Saved pattern</option>
            <option value="custom-new">Custom...</option>
          </select>
        </label>
        <label
          class="field"
          id="subsection-task-subtask-schedule-wrap"
          data-test-skedpal="subsection-subtask-schedule-wrap"
        >
          <span class="field-label">Subtask scheduling</span>
          <select
            id="subsection-task-subtask-schedule"
            class="field-input"
            data-test-skedpal="subsection-subtask-schedule"
          >
            <option value="parallel">Parallel</option>
            <option value="sequential">Sequential</option>
            <option value="sequential-single">Sequential (One at a time)</option>
          </select>
        </label>
      </div>
      <div class="field">
        <span class="field-label">Allowed TimeMaps</span>
        <div id="subsection-timemap-options" class="timemap-pills"></div>
      </div>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-subsection-modal-close>Cancel</button>
        <button type="submit" class="btn primary">Save Subsection</button>
      </div>
    </form>
  </div>
</div>
<div id="repeat-modal" class="task-modal hidden">
  <div class="task-modal__panel">
    <div class="task-modal__header">
      <div>
        <p class="task-modal__eyebrow">Repeat</p>
        <h3 class="task-modal__title">Custom recurrence</h3>
        <p class="task-modal__subtitle">Set up a repeating pattern similar to Google Calendar.</p>
      </div>
      <button
        type="button"
        class="modal-close-btn"
        data-repeat-modal-close
        aria-label="Close repeat modal"
        data-test-skedpal="modal-close-btn"
      >
        <svg
          class="modal-close-icon"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          data-test-skedpal="modal-close-icon"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18 17.94 6M18 18 6.06 6"
          ></path>
        </svg>
        <span class="sr-only" data-test-skedpal="modal-close-label">Close modal</span>
      </button>
    </div>
    <div class="task-modal__form" id="task-repeat-custom">
      <div class="grid md:grid-cols-[140px_1fr] gap-3 items-center">
        <span class="field-label">Repeat every</span>
        <div class="flex items-center gap-3">
          <input
            id="task-repeat-interval"
            type="number"
            min="1"
            value="1"
            class="field-input"
            style="max-width: 110px"
          />
          <select id="task-repeat-unit" class="field-input" style="max-width: 150px">
            <option value="day">day</option>
            <option value="week">week</option>
            <option value="month">month</option>
            <option value="year">year</option>
          </select>
        </div>
      </div>
      <div
        class="mt-3 hidden"
        id="task-repeat-weekly-section"
        data-test-skedpal="task-repeat-weekly-section"
      >
        <div class="space-y-2">
          <span class="field-label">Repeat</span>
          <label
            class="flex items-start gap-2 text-xs text-slate-200"
            data-test-skedpal="task-repeat-weekly-mode-any-label"
          >
            <input
              type="radio"
              name="task-repeat-weekly-mode"
              id="task-repeat-weekly-mode-any"
              value="any"
              data-test-skedpal="task-repeat-weekly-mode-any"
            />
            <span>
              Repeat
              <span data-test-skedpal="task-repeat-weekly-any-count">1</span>
              time(s) a week on any selected days
            </span>
          </label>
          <label
            class="flex items-start gap-2 text-xs text-slate-200"
            data-test-skedpal="task-repeat-weekly-mode-all-label"
          >
            <input
              type="radio"
              name="task-repeat-weekly-mode"
              id="task-repeat-weekly-mode-all"
              value="all"
              data-test-skedpal="task-repeat-weekly-mode-all"
              checked
            />
            <span>
              Repeat
              <span data-test-skedpal="task-repeat-weekly-all-count">1</span>
              time(s) on every selected day
            </span>
          </label>
        </div>
        <div class="mt-4" data-test-skedpal="task-repeat-weekly-days-wrap">
          <span class="field-label">Repeat on</span>
          <div
            class="flex flex-wrap gap-2"
            id="task-repeat-weekdays"
            data-test-skedpal="task-repeat-weekdays"
          ></div>
        </div>
      </div>
      <div class="mt-3 hidden" id="task-repeat-monthly-section">
        <label class="field">
          <span class="field-label">Monthly options</span>
          <select id="task-repeat-monthly-mode" class="field-input" data-test-skedpal="task-repeat-monthly-mode">
            <option value="day">Monthly on day</option>
            <option value="nth">Monthly on the</option>
          </select>
        </label>
        <div class="grid md:grid-cols-2 gap-3 mt-2">
          <label class="field" id="task-repeat-monthly-day-wrap">
            <span class="field-label">Day of month</span>
            <input id="task-repeat-monthly-day" type="number" min="1" max="31" class="field-input" />
          </label>
          <div class="grid grid-cols-2 gap-2" id="task-repeat-monthly-nth-wrap">
            <label class="field">
              <span class="field-label">Nth</span>
              <select id="task-repeat-monthly-nth" class="field-input">
                <option value="1">First</option>
                <option value="2">Second</option>
                <option value="3">Third</option>
                <option value="4">Fourth</option>
                <option value="-1">Last</option>
              </select>
            </label>
            <label class="field">
              <span class="field-label">Weekday</span>
              <select id="task-repeat-monthly-weekday" class="field-input">
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
                <option value="2">Tuesday</option>
                <option value="3">Wednesday</option>
                <option value="4">Thursday</option>
                <option value="5">Friday</option>
                <option value="6">Saturday</option>
              </select>
            </label>
          </div>
        </div>
      </div>
      <div class="mt-3 hidden" id="task-repeat-yearly-section" data-test-skedpal="task-repeat-yearly-section">
        <div
          class="grid md:grid-cols-2 gap-3"
          id="task-repeat-yearly-range-wrap"
          data-test-skedpal="task-repeat-yearly-range-wrap"
        >
          <label class="field" data-test-skedpal="task-repeat-yearly-range-start-field">
            <span class="field-label">Range start</span>
            <input
              id="task-repeat-yearly-range-start"
              type="date"
              class="field-input"
              data-test-skedpal="task-repeat-yearly-range-start"
            />
          </label>
          <label class="field" data-test-skedpal="task-repeat-yearly-range-end-field">
            <span class="field-label">Range end</span>
            <input
              id="task-repeat-yearly-range-end"
              type="date"
              class="field-input"
              data-test-skedpal="task-repeat-yearly-range-end"
            />
          </label>
        </div>
      </div>
      <div class="mt-3 space-y-2">
        <span class="field-label">Ends</span>
        <label class="flex items-center gap-2 text-xs text-slate-200">
          <input type="radio" name="task-repeat-end" id="task-repeat-end-never" value="never" checked />
          <span>Never</span>
        </label>
        <label class="flex items-center gap-2 text-xs text-slate-200">
          <input type="radio" name="task-repeat-end" id="task-repeat-end-on" value="on" />
          <span>On</span>
          <input type="date" id="task-repeat-end-date" class="field-input" style="max-width: 180px" />
        </label>
        <label class="flex items-center gap-2 text-xs text-slate-200">
          <input type="radio" name="task-repeat-end" id="task-repeat-end-after" value="after" />
          <span>After</span>
          <input
            type="number"
            min="1"
            value="1"
            id="task-repeat-end-count"
            class="field-input"
            style="max-width: 120px"
          />
          <span>occurrence(s)</span>
        </label>
      </div>
      <div class="task-modal__actions">
        <button type="button" class="btn muted" data-repeat-modal-close>Cancel</button>
        <button type="button" class="btn primary" id="task-repeat-save">Save repeat</button>
      </div>
    </div>
  </div>
</div>
